(this.webpackJsonplecorro=this.webpackJsonplecorro||[]).push([[0],{42:function(e,t,a){e.exports=a.p+"static/media/logo.5d5d9eef.svg"},44:function(e,t,a){e.exports=a(78)},78:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),s=a(18),r=a.n(s),o=a(10),c=a(39),m=a(14),i=a(26),u=a(40),d={isAuthenticated:!1,userId:"",token:"",pseudo:"",email:"",name:"",lastname:""};var p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CONNECTED_USER":return{isAuthenticated:!0,userId:t.value.userId,token:t.value.token,pseudo:t.value.pseudo,email:t.value.email,name:t.value.name,lastname:t.value.lastname}||e;case"DECONNECTED_USER":if(e.isAuthenticated)return d||e;break;default:return e}},h={key:"root",storage:a.n(u).a},b=Object(i.a)(h,p),E=Object(m.c)(b,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()),v=Object(i.b)(E),f=a(13),g=a.n(f),N=a(12),y=a(1),w=a(43),C=Object(o.b)((function(e){return e}))((function(e){var t=e.component,a=Object(w.a)(e,["component"]);return l.a.createElement(y.b,Object.assign({},a,{render:function(e){return localStorage.getItem("token")?l.a.createElement(t,e):l.a.createElement(y.a,{to:{pathname:"/login",state:{from:e.location}}})}}))}));var O=function(){return l.a.createElement("div",{className:"text-center text-danger font-weight-bold",style:{marginTop:"150px"}},"Page non trouv\xe9e !")},j=a(3),x=a(4),S=a(6),k=a(5),I=new(function(){function e(){Object(j.a)(this,e),this.authenticated=!1}return Object(x.a)(e,[{key:"login",value:function(e,t){var a=this;g.a.post("users/login",{data:e}).then((function(e){var n=e.data;a.authenticated=!0,t(n)})).catch((function(e){t(e),console.log("Erreur interne du serveur",e)}))}},{key:"logout",value:function(e){this.authenticated=!1,e()}},{key:"isAuthenticated",value:function(){return this.authenticated}}]),e}()),D=a(42),T=a.n(D),_=function(e){Object(S.a)(a,e);var t=Object(k.a)(a);function a(){var e;Object(j.a)(this,a);for(var n=arguments.length,l=new Array(n),s=0;s<n;s++)l[s]=arguments[s];return(e=t.call.apply(t,[this].concat(l))).logout=function(){var t=e.props;I.logout((function(){localStorage.removeItem("token"),t.dispatch({type:"DECONNECTED_USER"})}))},e}return Object(x.a)(a,[{key:"render",value:function(){var e,t={margin:7};return e=localStorage.getItem("token")?l.a.createElement("ul",{className:"navbar-nav ml-auto",style:t},l.a.createElement("li",{className:"nav-item dropdown"},l.a.createElement("a",{href:"profil",className:"nav-link dropdown-toggle",id:"navbarDarkDropdownMenuLink",role:"button","data-toggle":"dropdown","aria-expanded":"false"},this.props.pseudo?this.props.pseudo:"Profil"),l.a.createElement("ul",{className:"dropdown-menu dropdown-menu-dark"},l.a.createElement(N.b,{to:"/home"},l.a.createElement("li",{style:t},"Home")),l.a.createElement(N.b,{to:"/users/me"},l.a.createElement("li",{style:t},"Profil")),l.a.createElement(N.b,{to:"/login"},l.a.createElement("li",{className:"nav-item",style:t,onClick:this.logout},"Se D\xe9connecter"))))):l.a.createElement("ul",{className:"navbar-nav ml-auto"},l.a.createElement(N.b,{to:"/login",style:t},l.a.createElement("li",{style:t},"Se Connecter")),l.a.createElement(N.b,{to:"/register",style:t},l.a.createElement("li",{style:t},"S'enregistrer"))),l.a.createElement("div",null,l.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-light",style:{backgroundColor:"#e3f2fd"}},l.a.createElement(N.b,{to:"/"},l.a.createElement("img",{style:{height:"30px",width:"40px"},src:T.a,alt:"logo"}),"LeCorro"),l.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"},l.a.createElement("span",{className:"navbar-toggler-icon"})),l.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarSupportedContent"},e)))}}]),a}(l.a.Component),F=Object(o.b)((function(e){return{isAuthenticated:e.isAuthenticated,pseudo:e.pseudo}}))(_),A=function(e){Object(S.a)(a,e);var t=Object(k.a)(a);function a(){return Object(j.a)(this,a),t.apply(this,arguments)}return Object(x.a)(a,[{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement(F,null),l.a.createElement("div",{className:"container",style:{paddingTop:" 80px"}},"Welcome Page"))}}]),a}(l.a.Component),U=a(19),M=a(15),P=function(e){Object(S.a)(a,e);var t=Object(k.a)(a);function a(){return Object(j.a)(this,a),t.apply(this,arguments)}return Object(x.a)(a,[{key:"render",value:function(){return l.a.createElement("div",{className:"alert alert-warning text-center"},this.props.message)}}]),a}(l.a.Component),R=function(e){Object(S.a)(a,e);var t=Object(k.a)(a);function a(e){var n;return Object(j.a)(this,a),(n=t.call(this,e)).handleInputsChange=function(e){n.setState(Object(M.a)({},e.target.name,e.target.value))},n.handleSubmit=function(e){e.preventDefault(),n.setState({response:null});var t=n.props;I.login(n.state,(function(e){if(e.error)n.setState({response:e.error,password:""});else if(e.userId&&e.token&&e.email&&e.pseudo&&e.name&&e.lastname){var a={type:"CONNECTED_USER",value:Object(U.a)({},e)};t.dispatch(a),localStorage.setItem("token",e.token),t.history.push("/home")}else n.setState({response:"Erreur de connexion, veuillez r\xe9essayer ult\xe9rieurement !"})}))},n.state={email:"louloulexus@gmail.com",password:"1234",response:null},n}return Object(x.a)(a,[{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement(F,null),l.a.createElement("div",{className:"container col-6",style:{paddingTop:" 80px"}},this.state.response?l.a.createElement(P,{message:this.state.response}):this.state.response,l.a.createElement("form",{onSubmit:this.handleSubmit},l.a.createElement("div",{className:"mb-3 row"},l.a.createElement("label",{htmlFor:"email",className:"col-sm-3 col-form-label text-left"},"Adresse email : "),l.a.createElement("div",{className:"col-sm-9"},l.a.createElement("input",{name:"email",type:"text",className:"form-control",id:"email",value:this.state.email,onChange:this.handleInputsChange}))),l.a.createElement("div",{className:"mb-3 row"},l.a.createElement("label",{htmlFor:"password",className:"col-sm-3 col-form-label text-left"},"Mot de passe : "),l.a.createElement("div",{className:"col-sm-9"},l.a.createElement("input",{name:"password",type:"password",className:"form-control",id:"password",value:this.state.password,onChange:this.handleInputsChange}))),l.a.createElement("button",{className:"btn btn-success btn-block "},"Connexion"))))}}]),a}(l.a.Component),L=Object(o.b)((function(e){return{isAuthenticated:e.isAuthenticated}}))(R),X=function(e){Object(S.a)(a,e);var t=Object(k.a)(a);function a(e){var n;return Object(j.a)(this,a),(n=t.call(this,e)).handleInputsChange=function(e){n.setState(Object(M.a)({},e.target.name,e.target.value))},n.handleSubmit=function(e){e.preventDefault();var t=n.state;n.api.post("api/users/register",{data:t}).then((function(e){var t=e.data;t.error?n.setState({response:t.error}):t.userId&&(n.setState({response:"Vous \xeates bien enregistr\xe9s !"}),n.setState(n.initialState),setTimeout((function(){n.props.history.push("/home")}),2e3))})).catch((function(e){n.setState({response:"Une erreur s'est produite, veuillez r\xe9essayer plutard !"}),console.log("Une erreur s'est produite lors de l'enregistrement front-end",e)}))},n.initialState={register:"",email:"",name:"",lastname:"",pseudo:"",password:"",cpassword:""},n.state=Object(U.a)({response:null},n.initialState),n.api=g.a.create({baseURL:"http://localhost:8080/"}),n}return Object(x.a)(a,[{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement(F,null),l.a.createElement("div",{className:"container col-6",style:{paddingTop:" 80px"}},null!=this.state.response?l.a.createElement(P,{message:this.state.response}):null,l.a.createElement("form",{onSubmit:this.handleSubmit},l.a.createElement("div",{className:"mb-3 row"},l.a.createElement("label",{htmlFor:"register",className:"col-sm-3 col-form-label text-left"},"Matricule \xe9tudiant : "),l.a.createElement("div",{className:"col-sm-9"},l.a.createElement("input",{name:"register",type:"text",className:"form-control",id:"register",value:this.state.register,onChange:this.handleInputsChange}))),l.a.createElement("div",{className:"mb-3 row"},l.a.createElement("label",{htmlFor:"email",className:"col-sm-3 col-form-label text-left"},"Adresse email : "),l.a.createElement("div",{className:"col-sm-9"},l.a.createElement("input",{name:"email",type:"email",className:"form-control",id:"email",value:this.state.email,onChange:this.handleInputsChange}))),l.a.createElement("div",{className:"mb-3 row"},l.a.createElement("label",{htmlFor:"name",className:"col-sm-3 col-form-label text-left"},"Nom  : "),l.a.createElement("div",{className:"col-sm-9"},l.a.createElement("input",{name:"name",type:"text",className:"form-control",id:"name",value:this.state.name,onChange:this.handleInputsChange}))),l.a.createElement("div",{className:"mb-3 row"},l.a.createElement("label",{htmlFor:"lastname",className:"col-sm-3 col-form-label text-left"},"Pr\xe9nom : "),l.a.createElement("div",{className:"col-sm-9"},l.a.createElement("input",{name:"lastname",type:"text",className:"form-control",id:"lastname",value:this.state.lastname,onChange:this.handleInputsChange}))),l.a.createElement("div",{className:"mb-3 row"},l.a.createElement("label",{htmlFor:"pseudo",className:"col-sm-3 col-form-label text-left"},"Pseudo: "),l.a.createElement("div",{className:"col-sm-9"},l.a.createElement("input",{name:"pseudo",type:"text",className:"form-control",id:"pseudo",value:this.state.pseudo,onChange:this.handleInputsChange}))),l.a.createElement("div",{className:"mb-3 row"},l.a.createElement("label",{htmlFor:"password",className:"col-sm-3 col-form-label text-left"},"Mot de passe : "),l.a.createElement("div",{className:"col-sm-9"},l.a.createElement("input",{name:"password",type:"password",className:"form-control",id:"password",value:this.state.password,onChange:this.handleInputsChange}))),l.a.createElement("div",{className:"mb-3 row"},l.a.createElement("label",{htmlFor:"cpassword",className:"col-sm-3 col-form-label text-left"},"Confirmer mot de passe : "),l.a.createElement("div",{className:"col-sm-9"},l.a.createElement("input",{name:"cpassword",type:"password",className:"form-control",id:"cpassword",value:this.state.cpassword,onChange:this.handleInputsChange}))),l.a.createElement("button",{className:"btn btn-success btn-block "},"Creer un compte"))))}}]),a}(l.a.Component),z=function(e){Object(S.a)(a,e);var t=Object(k.a)(a);function a(){return Object(j.a)(this,a),t.apply(this,arguments)}return Object(x.a)(a,[{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement(F,null),l.a.createElement("div",{className:"container col-6",style:{paddingTop:" 80px"}},l.a.createElement("div",{className:"alert alert-success display-2"},"Bienvenue sur votre compte,",l.a.createElement("span",{className:"text-capitalize"},this.props.pseudo),"  !")))}}]),a}(l.a.Component),B=Object(o.b)((function(e){return e}))(z),V=function(e){Object(S.a)(a,e);var t=Object(k.a)(a);function a(e){var n;return Object(j.a)(this,a),(n=t.call(this,e)).handleSubmit=function(e){e.preventDefault(),console.log(n.state);var t=n.props;g.a.patch("users/me/"+n.props.token,n.state).then((function(e){t.history.push("/home")})).catch((function(e){console.log("Erreur lors de l'update du user")}))},n.handleInputsChange=function(e){n.setState(Object(M.a)({},e.target.name,e.target.value))},n.state={register:"",email:"",name:"",lastname:"",pseudo:""},n}return Object(x.a)(a,[{key:"componentDidMount",value:function(){var e=this;g.a.get("users/me/"+this.props.token).then((function(t){var a=t.data;e.setState({register:a.register,email:a.email,name:a.name,lastname:a.lastname,pseudo:a.pseudo})})).catch((function(e){return console.log("Erreur axios : ",e)}))}},{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement(F,null),l.a.createElement("div",{className:"container",style:{paddingTop:" 80px"}},l.a.createElement("form",{onSubmit:this.handleSubmit,className:"col-sm-7"},l.a.createElement("div",{className:"row mb-3"},l.a.createElement("label",{htmlFor:"register",className:"col-sm-2 col-form-label col-form-label-sm"},"Matricule : "),l.a.createElement("div",{className:"col-sm-10"},l.a.createElement("input",{type:"text",className:"form-control form-control-sm",id:"register",disabled:!0,value:this.state.register,onChange:this.handleInputsChange,placeholder:""}))),l.a.createElement("div",{className:"row mb-3"},l.a.createElement("label",{htmlFor:"email",className:"col-sm-2 col-form-label col-form-label-sm"},"Adresse email : "),l.a.createElement("div",{className:"col-sm-10"},l.a.createElement("input",{name:"email",type:"email",className:"form-control form-control-sm",id:"email",value:this.state.email,onChange:this.handleInputsChange,placeholder:""}))),l.a.createElement("div",{className:"row mb-3"},l.a.createElement("label",{htmlFor:"name",className:"col-sm-2 col-form-label col-form-label-sm"},"Nom : "),l.a.createElement("div",{className:"col-sm-10"},l.a.createElement("input",{name:"name",type:"text",className:"form-control form-control-sm",id:"name",value:this.state.name,onChange:this.handleInputsChange,placeholder:""}))),l.a.createElement("div",{className:"row mb-3"},l.a.createElement("label",{htmlFor:"lastname",className:"col-sm-2 col-form-label col-form-label-sm"},"Pr\xe9nom : "),l.a.createElement("div",{className:"col-sm-10"},l.a.createElement("input",{name:"lastname",type:"text",className:"form-control form-control-sm",id:"lastname",value:this.state.lastname,onChange:this.handleInputsChange,placeholder:""}))),l.a.createElement("div",{className:"row mb-3"},l.a.createElement("label",{htmlFor:"pseudo",className:"col-sm-2 col-form-label col-form-label-sm"},"Pseudo : "),l.a.createElement("div",{className:"col-sm-10"},l.a.createElement("input",{name:"pseudo",type:"text",className:"form-control form-control-sm",id:"pseudo",value:this.state.pseudo,onChange:this.handleInputsChange,placeholder:""}))),l.a.createElement("button",{className:"btn btn-success btn-sm btn-block",type:"submit"},"Mettre \xe0 jour"))))}}]),a}(l.a.Component),W=Object(o.b)((function(e){return e}))(V);a(77);var J=function(){return l.a.createElement("div",{className:"App"},l.a.createElement(N.a,null,l.a.createElement(y.d,null,l.a.createElement(y.b,{path:"/",exact:!0,component:A}),l.a.createElement(y.b,{path:"/login",exact:!0,component:L}),l.a.createElement(y.b,{path:"/register",exact:!0,component:X}),l.a.createElement(C,{path:"/home",exact:!0,component:B}),l.a.createElement(C,{path:"/users/me",exact:!0,component:W}),l.a.createElement(y.b,{path:"*",component:O}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));console.log(E),g.a.defaults.baseURL="http://localhost:8080/api/",r.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(o.a,{store:E},l.a.createElement(c.a,{persistor:v},l.a.createElement(J,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[44,1,2]]]);
//# sourceMappingURL=main.7d2b37de.chunk.js.map